<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ernestina Soore Music Store</title>
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <style>
    /* === RESET === */
    * {box-sizing: border-box; margin:0; padding:0;}
    body {font-family:'Poppins', sans-serif; background:#0b0c10; color:#fff;}

    /* === HERO SECTION === */
    header {
      background:linear-gradient(to bottom right, rgba(31,122,237,0.8), rgba(9,32,63,0.8)), 
      url('https://images.unsplash.com/photo-1497032628192-86f99bcd76bc?auto=format&fit=crop&w=1920&q=80') center/cover;
      padding:80px 20px; text-align:center;
      color:#fff; border-bottom:2px solid #1f7aed;
    }
    header h1 {font-size:2.8rem; margin-bottom:10px; text-shadow:0 2px 6px rgba(0,0,0,0.4);}
    header p {font-size:1.2rem; opacity:0.9;}

    /* === SONG GRID === */
    .song-list {max-width:1000px;margin:40px auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;padding:0 15px;}
    .song {
      background:#111827;border-radius:12px;padding:20px;box-shadow:0 0 15px rgba(0,0,0,0.3);
      transition:transform 0.3s,box-shadow 0.3s;
    }
    .song:hover {transform:translateY(-5px);box-shadow:0 0 25px rgba(31,122,237,0.6);}
    .song-title {font-size:1.1rem;font-weight:600;margin-bottom:10px;}
    .price {color:#1f7aed;font-weight:700;font-size:1rem;}
    .song input[type="checkbox"] {transform:scale(1.3);margin-right:10px;cursor:pointer;}

    /* === CHECKOUT SECTION === */
    .checkout {max-width:700px;margin:50px auto;text-align:center;background:#111827;padding:25px;border-radius:12px;box-shadow:0 0 15px rgba(31,122,237,0.2);}
    .checkout input {padding:10px;width:240px;margin:5px;border:1px solid #333;border-radius:6px;background:#0f1624;color:#fff;}
    .checkout button {
      margin-top:10px;padding:12px 28px;border:none;border-radius:8px;background:#1f7aed;color:white;
      font-weight:bold;font-size:1rem;cursor:pointer;transition:background 0.3s,transform 0.2s;
    }
    .checkout button:hover {background:#4285f4;transform:translateY(-2px);}
    .checkout button:disabled {opacity:0.5;cursor:not-allowed;}
    .total {margin-top:10px;font-weight:bold;font-size:1.1rem;color:#1f7aed;}

    /* === PROGRESS SECTION === */
    .progress-area {max-width:700px;margin:30px auto;}
    .file {background:#111827;border-radius:10px;padding:12px 15px;margin-bottom:12px;box-shadow:0 0 10px rgba(0,0,0,0.3);}
    .bar {background:#0f1624;height:10px;border-radius:5px;overflow:hidden;margin-top:6px;}
    .bar span {display:block;height:100%;background:#1f7aed;width:0%;transition:width 0.3s;}
    .percent {float:right;color:#1f7aed;font-weight:600;}
    .done {color:#22c55e;font-weight:bold;text-align:center;margin-top:20px;font-size:1.2rem;}

    /* === FOOTER === */
    footer {text-align:center;color:#aaa;font-size:0.9rem;padding:30px;}

    @media(max-width:600px){
      header h1{font-size:2rem;}
      .checkout input{width:100%;}
      .checkout button{width:100%;}
    }
  </style>
</head>
<body>

  <header>
    <h1>ðŸŽµ Ernestina Soore Music Album 2025</h1>
    <p>Select songs and click PAY NOW â€” A song costs GHC20 (GHS)</p>
  </header>

  <section class="song-list" id="songList"></section>

  <section class="checkout">
    <h2>ðŸ›’ Checkout</h2>
    <input type="text" id="name" placeholder="Full Name" /><br>
    <input type="email" id="email" placeholder="Email Address" /><br>
    <button id="payBtn" disabled>Pay Now</button>
    <div id="total" class="total">Total: GHC 0</div>
  </section>

  <section class="progress-area" id="progressArea"></section>
  <div class="done" id="doneMsg"></div>

  <footer>
    Â© 2025 Ernestina Soore Music Store â€¢ Powered by Apprise Music
  </footer>

  <script>
  const SONGS = [
    {id:"1",title:"Mbe'eniya",price:20,url:"https://pixeldrain.com/u/6u5DmW9V"},
    {id:"2",title:"Ma me nsom wo yie",price:20,url:"https://pixeldrain.com/u/fyJ2CCrE"},
    {id:"3",title:"Hom nde daana",price:20,url:"https://pixeldrain.com/u/MaFyuVaA"},
    {id:"4",title:"Panga daana",price:20,url:"https://pixeldrain.com/u/XNtt4omV"},
    {id:"5",title:"Yen yire",price:20,url:"https://pixeldrain.com/u/YJbBYdpG"},
    {id:"6",title:"Jesus Never Fails",price:20,url:"https://pixeldrain.com/u/JvGHYj3F"},
    {id:"7",title:"Yene ma'e",price:20,url:"https://pixeldrain.com/u/F336prYN"},
    {id:"8",title:"Ami ma yele",price:20,url:"https://pixeldrain.com/u/1KtdJZgg"}
  ];

  const PAYSTACK_KEY = "pk_live_6c49dba40c4aa95938a74589cab5ed687c75fd3a";
  const listDiv = document.getElementById('songList');
  const payBtn = document.getElementById('payBtn');
  const totalDiv = document.getElementById('total');
  const nameInput = document.getElementById('name');
  const emailInput = document.getElementById('email');
  const progressArea = document.getElementById('progressArea');
  const doneMsg = document.getElementById('doneMsg');
  let selected = [];

  SONGS.forEach(song=>{
    const card=document.createElement('div');
    card.className="song";
    card.innerHTML=`
      <div class="song-title"><input type="checkbox" data-id="${song.id}">${song.title}</div>
      <div class="price">GHC ${song.price}</div>
    `;
    listDiv.appendChild(card);
    card.querySelector('input').addEventListener('change',updateTotal);
  });

  function updateTotal(){
    selected=SONGS.filter(s=>document.querySelector(`[data-id="${s.id}"]`).checked);
    const total=selected.reduce((a,b)=>a+b.price,0);
    totalDiv.textContent=`Total: GHC ${total}`;
    payBtn.disabled=total===0;
  }

  payBtn.addEventListener('click',()=>{
    const email=emailInput.value.trim();
    const name=nameInput.value.trim();
    if(!name||!email)return alert("Please enter your full name and email.");
    const amount=selected.reduce((a,b)=>a+b.price,0)*100;

    const handler=PaystackPop.setup({
      key:PAYSTACK_KEY,
      email:email,
      amount:amount,
      currency:"GHS",
      metadata:{custom_fields:[{display_name:"Customer Name",variable_name:"customer_name",value:name}]},
      callback:function(response){
        alert("Payment successful! Reference: "+response.reference);
        startDownloads();
      },
      onClose:function(){alert("Payment window closed.");}
    });
    handler.openIframe();
  });

  function startDownloads(){
    progressArea.innerHTML="";
    doneMsg.textContent="";
    setTimeout(()=>{selected.forEach((s,i)=>setTimeout(()=>downloadSong(s),i*600));},2000);
  }

  function downloadSong(song){
    const box=document.createElement('div');
    box.className="file";
    box.innerHTML=`<div>${song.title} <span class="percent">0%</span></div><div class="bar"><span></span></div>`;
    progressArea.appendChild(box);
    const bar=box.querySelector('.bar span');
    const percent=box.querySelector('.percent');
    let progress=0;
    const interval=setInterval(()=>{
      progress+=Math.random()*20;
      if(progress>=100){
        progress=100;clearInterval(interval);
        percent.textContent="Done";bar.style.width="100%";
        const a=document.createElement('a');a.href=song.url;a.download=song.title+".mp3";
        document.body.appendChild(a);a.click();a.remove();
        if([...progressArea.querySelectorAll('.percent')].every(p=>p.textContent==="Done")){
          doneMsg.textContent="âœ… All downloads complete!";
        }
      }else{
        percent.textContent=Math.floor(progress)+"%";bar.style.width=progress+"%";
      }
    },250);
  }
  </script>
</body>
</html>